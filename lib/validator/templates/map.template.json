{
  "handshake" : {
    "entity-identifier" : {
      "constraints": {
        "required": true,
        "unique": {
          "key" : "handshake"
        },
        "not-null": true,
        "not-empty": true,
        "constructor": "String"
      }
    },
    "entity-room" : {
      "constraints": {
        "required": true,
        "unique": {
          "key" : "handshake"
        },
        "not-null": true,
        "not-empty": true,
        "constructor": "String"
      }
    }
  },

  "nodes" : {
    "constraints": {
      "required" : true
    },
    "items": {
      "entity" : {
        "constraints": {
          "required" : true,
          "unique"  : {
            "key" : "entity"
          },
          "file-path" : true,
          "not-null" : true,
          "not-empty" : true,
          "constructor" : "String"
        }
      },
      "properties" : {
        "constraints": {
          "constructor" : "Array",
          "unique" : true
        }
      }
    }
  },

  "environments" : {
    "constraints": {
      "required": true
    },
    "items": {
      "nodes" : {
        "constraints": {
          "required" : true,
          "constructor" : "Array",
          "min-length" : 1
        }
      },
      "streams" : {
        "items" : {
          "constraints": {
            "required" : true
          },
          "to" : {
            "constraints": {
              "required" : true,
              "constructor" : "Array",
              "min-length" : 1
            }
          },
          "properties" : {
            "constraints": {
              "constructor" : "Array",
              "min-length": 1
            }
          },
          "socket-events" : {
            "constraints": {
              "required" : true,
              "constructor": "Array",
              "min-length": 1
            }
          },
          "propagation" : {
            "constraints": {
              "required": true,
              "constructor": "Object",
              "max-length": 1,
              "switch" : {
                "type" : {
                  "interval" : {
                    "timeout" : {
                      "constraints": {
                        "required" : true,
                        "constructor" : "Number"
                      }
                    },
                    "condition" : {
                      "constraints": {
                        "required" : true
                      },
                      "start-on" : {
                        "constraints": {
                          "required" : true,
                          "constructor" : "String"
                        }
                      },
                      "stop-on" : {
                        "constraints": {
                          "required" : true,
                          "constructor" : "String"
                        }
                      }
                    }
                  },
                  "onchange" : {},
                  "onset" : {}
                }
              }
            },
            "type" : {
              "constraints": {
                "required" : true,
                "constructor" : "String",
                "admit": ["interval", "onchange", "onset"]
              }
            }
          }
        }
      }
    }
  }
}