{
  "handshake" : {
    "identifier" : "type",
    "storage" : "storage",
    "room" : "email"
  },

  "nodes" : ["device", "user"],

  "streams" : {
    "device-to-user" : {
      "data-to" : ["user"],
      "data-from" : ["device"],
      "socket-events" : ["message"],
      "propagation" : {
        "type" : "interval",
        "timeout" : 3000,
        "condition" : {
          "start-on" : "user:hasSockets:true",
          "stop-on"  : "user:hasSockets:false"
        }
      }
    }
  },

  "point-to-point" : {
    "gpio" : {
      "to" : ["device"],
      "from" : ["user"],
      "events" : ["set-gpio-mask"],
      "map-by" : ["identifier", "storage", "room"]
    }
  }
}